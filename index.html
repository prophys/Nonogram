<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Nonogram</title>
  <link rel="stylesheet" href="bootstrap.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <script src="https://cdn.rawgit.com/HandsomeOne/Nonogram/master/nonogram.js"></script>
  <script>
    onload = function () {
      var pres = document.querySelectorAll('pre');
      for (var i in pres) {
        eval(pres[i].innerHTML);
      }
      var canvases = document.querySelectorAll('canvas');
      for (var i in canvases) {
        canvases[i].title = canvases[i].id;
      }
    }
    function parseArray(str) {
      str = str.trim();
      var hints = str.split('\n');
      hints.forEach(function (str, i, hints) {
        var t = str.split(',');
        t.forEach(function (hint, i, t) {
          t[i] = parseInt(hint);
        });
        hints[i] = t.filter(function (e) {return e});
      });
      return hints;
    }
  </script>
  <style>
    canvas {
      width: 100%;
    }
  </style>
</head>

<body class="container">
  <h1>HandsomeOne's Nonogram Demo</h1>
  <h2>Basic Examples</h2>
  <hr>
  <h3><code>NonogramEdit</code></h3>
  <div class="row">
    <div class="col-md-4">
      <canvas id="edit1"></canvas>
    </div>
    <div class="col-md-8">
      <pre>
new NonogramEdit(4, 8, 'edit1', {
  threshold: 0.2,
  meshed: true,
  boldMeshGap: 2,
});</pre>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <pre>
new NonogramEdit(2, 4, 'edit2', {
  grid: [[true, false, true, false], [false, true, false, true]],
  backgroundColor: '#eee',
});</pre>
    </div>
    <div class="col-md-4">
      <canvas id="edit2"></canvas>
    </div>
  </div>
  <hr>
  <h3><code>NonogramPlay</code></h3>
  <div class="row">
    <div class="col-md-4">
      <canvas id="play1"></canvas>
    </div>
    <div class="col-md-8">
      <pre>
new NonogramPlay([[1,1], [1,1]], [[1], [1], [1], [1]], 'play1', {
  filledColor: '#0c6',
  correctColor: '#0c6',
});</pre>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <pre>
new NonogramPlay([[1,1], [1,1]], [[2], [], [2], []], 'play2');</pre>
    </div>
    <div class="col-md-4">
      <canvas id="play2"></canvas>
    </div>
  </div>
  <hr>
  <h3><code>NonogramSolve</code></h3>
  <div class="row">
    <div class="col-md-4">
      <canvas id="solve1"></canvas>
    </div>
    <div class="col-md-8">
      <pre>
new NonogramSolve([[1,1], [1,1]], [[2], [], [2], []], 'solve1', {
  delay: 200,
}).solve();</pre>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3">
      <pre>
var solve2RowHints = [
  [7, 2, 2, 7],
  [1, 1, 1, 2, 1, 1],
  [1, 3, 1, 3, 1, 1, 3, 1],
  [1, 3, 1, 2, 1, 1, 3, 1],
  [1, 3, 1, 2, 1, 3, 1],
  [1, 1, 2, 2, 1, 1],
  [7, 1, 1, 1, 7],
  [2],
  [2, 3, 2, 1, 4],
  [1, 1, 3, 3, 2, 1],
  [3, 1, 3, 2, 2],
  [1, 1, 1, 3, 1, 1],
  [1, 5, 1, 1, 1, 1],
  [1, 1, 1, 1, 3, 1],
  [7, 1, 1],
  [1, 1, 1, 1, 1, 1, 1, 1],
  [1, 3, 1, 1, 1, 2, 2],
  [1, 3, 1, 2, 1, 2, 1, 1],
  [1, 3, 1, 1, 1, 2],
  [1, 1, 2, 1, 1],
  [7, 1, 3, 1]
];</pre>
    </div>
    <div class="col-md-3">
      <pre>
var solve2ColHints = [
  [7, 1, 2, 7],
  [1, 1, 1, 1, 1, 1],
  [1, 3, 1, 1, 1, 3, 1],
  [1, 3, 1, 1, 1, 1, 3, 1],
  [1, 3, 1, 1, 1, 1, 3, 1],
  [1, 1, 2, 1, 1],
  [7, 1, 1, 1, 7],
  [4],
  [4, 2, 2, 2, 2, 2],
  [1, 2, 1, 1, 1, 2, 3],
  [1, 2, 2, 2],
  [2, 3, 1, 1, 1, 1, 1],
  [3, 3, 2, 3, 1, 1],
  [1, 1, 3, 2],
  [7, 1, 1],
  [1, 1, 1, 1, 1, 1, 1],
  [1, 3, 1, 3, 2, 3],
  [1, 3, 1, 2, 2, 1, 1],
  [1, 3, 1, 1, 1, 1, 1],
  [1, 1, 5, 3],
  [7, 1, 1, 2, 1]
];</pre>
    </div>
    <div class="col-md-2">
      <pre>
new NonogramSolve(
  solve2RowHints,
  solve2ColHints,
  'solve2').solve();</pre>
    </div>
    <div class="col-md-4">
      <canvas id="solve2"></canvas>
    </div>
  </div>
  <h2>Advanced Usages</h2>
  <hr>
  <h3>Nonogram Generator</h3>
  <p>
    This is an example showing how to use custom event listener to create <code>NonogramPlay</code> and <code>NonogramSolve</code> instances automatically.
  </p>
  <div class="row">
    <div class="col-md-4">
      <canvas id="adv-edit1"></canvas>
    </div>
    <div class="col-md-4">
      <canvas id="adv-solve1"></canvas>
    </div>
    <div class="col-md-4">
      <canvas id="adv-play1"></canvas>
    </div>
  </div>
  <pre>
document.getElementById('adv-edit1').addEventListener('hintchange', function () {
  new NonogramPlay(this.nonogram.rowHints, this.nonogram.colHints, 'adv-play1', {
    boldMeshGap: 3,
  });
  new NonogramSolve(this.nonogram.rowHints, this.nonogram.colHints, 'adv-solve1').solve();
})
new NonogramEdit(6, 6, 'adv-edit1');</pre>
  <hr>
  <h3>Nonogram Solver</h3>
  <p>This example shows how to solve the nonogram by given hints, separated by newlines and commas.</p>
  <div class="row form-group">
    <div class="col-md-4">
      <textarea id="txt-row-hints2" class="form-control" rows="15" placeholder="rowHints...">4
8
10
2,2,2
3,2,3
12
2,6,2
2,6,2
2,4,2
3,3
8
4</textarea>
    </div>
    <div class="col-md-4">
      <textarea id="txt-col-hints2" class="form-control" rows="15" placeholder="colHints...">4
8
5,3
2,3,2
3,4,2
9,2
9,2
3,4,2
2,3,2
5,3
8
4</textarea>
    </div>
    <div class="col-md-4">
      <button id="btn-solve2" class="btn btn-primary btn-block">Solve!</button>
      <canvas id="adv-solve2"></canvas>
    </div>
  </div>
  <pre>
document.getElementById('btn-solve2').addEventListener('click', function () {
  new NonogramSolve(
    parseArray(document.getElementById('txt-row-hints2').value),
    parseArray(document.getElementById('txt-col-hints2').value),
    'adv-solve2',
    {
      filledColor: '#f90',
      correctColor: '#f90',
      wrongColor: '#09f',
    }).solve();
});</pre>
  <p>...here <code>parseArray</code> is a function converting your input to a two-dimensional array, whose definition can be found in the source code.
</body>

</html>